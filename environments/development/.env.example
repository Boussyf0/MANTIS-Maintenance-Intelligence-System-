# ════════════════════════════════════════════════════════════════════════
# MANTIS - Environnement DÉVELOPPEMENT
# ════════════════════════════════════════════════════════════════════════

ENVIRONMENT=development
PROJECT_NAME=mantis-dev
PROJECT_VERSION=1.0.0-dev
LOG_LEVEL=DEBUG

# ────────────────────────────────────────────────────────────────────────
# KAFKA
# ────────────────────────────────────────────────────────────────────────
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_GROUP_ID=mantis-dev-consumer
KAFKA_AUTO_OFFSET_RESET=earliest

KAFKA_TOPIC_SENSOR_RAW=sensor.raw
KAFKA_TOPIC_SENSOR_PREPROCESSED=sensor.preprocessed
KAFKA_TOPIC_FEATURES_COMPUTED=features.computed
KAFKA_TOPIC_ANOMALIES_DETECTED=anomalies.detected
KAFKA_TOPIC_RUL_PREDICTIONS=rul.predictions
KAFKA_TOPIC_MAINTENANCE_ACTIONS=maintenance.actions

# ────────────────────────────────────────────────────────────────────────
# DATABASES
# ────────────────────────────────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=mantis_dev
POSTGRES_USER=mantis
POSTGRES_PASSWORD=mantis_dev_password
POSTGRES_MAX_CONNECTIONS=50

TIMESCALEDB_HOST=localhost
TIMESCALEDB_PORT=5433
TIMESCALEDB_DB=mantis_timeseries_dev
TIMESCALEDB_USER=mantis
TIMESCALEDB_PASSWORD=mantis_dev_password

INFLUXDB_URL=http://localhost:8086
INFLUXDB_ORG=mantis-dev
INFLUXDB_BUCKET=sensor_data_dev
INFLUXDB_TOKEN=dev_token_12345
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin_dev_password

REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=redis_dev_password
REDIS_DB=0

# ────────────────────────────────────────────────────────────────────────
# OBJECT STORAGE
# ────────────────────────────────────────────────────────────────────────
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET_RAW_DATA=raw-data-dev
MINIO_BUCKET_PROCESSED=processed-data-dev
MINIO_BUCKET_MODELS=models-dev
MINIO_BUCKET_MLFLOW=mlflow-dev

# ────────────────────────────────────────────────────────────────────────
# MLOPS
# ────────────────────────────────────────────────────────────────────────
MLFLOW_TRACKING_URI=http://localhost:5002
MLFLOW_BACKEND_STORE_URI=postgresql://mantis:mantis_dev_password@localhost:5432/mlflow_dev
MLFLOW_ARTIFACT_ROOT=s3://mlflow-dev
MLFLOW_S3_ENDPOINT_URL=http://localhost:9000

FEAST_ONLINE_STORE=redis
FEAST_OFFLINE_STORE=parquet
FEAST_REGISTRY_PATH=s3://feast-dev/registry.db

# ────────────────────────────────────────────────────────────────────────
# SERVICES PORTS
# ────────────────────────────────────────────────────────────────────────
PORT_INGESTION_IIOT=8001
PORT_PREPROCESSING=8002
PORT_FEATURE_EXTRACTION=8003
PORT_ANOMALY_DETECTION=8004
PORT_RUL_PREDICTION=8005
PORT_ORCHESTRATOR=8006
PORT_DASHBOARD=3000

# ────────────────────────────────────────────────────────────────────────
# PROTOCOLES INDUSTRIELS (Dev/Test)
# ────────────────────────────────────────────────────────────────────────
OPCUA_ENDPOINT=opc.tcp://localhost:4840
OPCUA_SECURITY_POLICY=None
OPCUA_USERNAME=
OPCUA_PASSWORD=

MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_CLIENT_ID=mantis-dev-mqtt

MODBUS_HOST=localhost
MODBUS_PORT=502
MODBUS_UNIT_ID=1

# ────────────────────────────────────────────────────────────────────────
# ML CONFIGURATION
# ────────────────────────────────────────────────────────────────────────
MODEL_RUL_PATH=models/rul_model_dev
MODEL_ANOMALY_PATH=models/anomaly_detector_dev

RUL_WINDOW_SIZE=256  # Plus petit pour dev
RUL_OVERLAP=0.5
ANOMALY_THRESHOLD=0.7  # Plus permissif en dev
FEATURE_EXTRACTION_SAMPLING_RATE=1000

# ────────────────────────────────────────────────────────────────────────
# MONITORING
# ────────────────────────────────────────────────────────────────────────
PROMETHEUS_URL=http://localhost:9091
GRAFANA_URL=http://localhost:3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_COLLECTOR_ENDPOINT=http://localhost:14268/api/traces

# ────────────────────────────────────────────────────────────────────────
# SÉCURITÉ (Dev - non sécurisé)
# ────────────────────────────────────────────────────────────────────────
JWT_SECRET_KEY=dev_secret_key_not_for_production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ────────────────────────────────────────────────────────────────────────
# PERFORMANCE
# ────────────────────────────────────────────────────────────────────────
JAVA_OPTS=-Xms256m -Xmx1g
SPRING_PROFILES_ACTIVE=development
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
MAX_WORKERS=2  # Moins de workers en dev

# ────────────────────────────────────────────────────────────────────────
# DATA PROCESSING
# ────────────────────────────────────────────────────────────────────────
KAFKA_CONSUMER_BATCH_SIZE=50  # Plus petit en dev
PREPROCESSING_BATCH_SIZE=128
FEATURE_EXTRACTION_BATCH_SIZE=64

KAFKA_CONSUMER_TIMEOUT=30
HTTP_TIMEOUT=60
DB_CONNECTION_TIMEOUT=10

# ────────────────────────────────────────────────────────────────────────
# RETENTION (Plus court en dev)
# ────────────────────────────────────────────────────────────────────────
RETENTION_RAW_DATA_DAYS=7
RETENTION_PREPROCESSED_DAYS=14
RETENTION_FEATURES_DAYS=30
RETENTION_PREDICTIONS_DAYS=30
COMPRESSION_AFTER_DAYS=1

# ────────────────────────────────────────────────────────────────────────
# DEBUG & DÉVELOPPEMENT
# ────────────────────────────────────────────────────────────────────────
DEBUG=true
ENABLE_PROFILING=true
ENABLE_MOCK_DATA=true  # Générer des données de test
ENABLE_HOT_RELOAD=true
